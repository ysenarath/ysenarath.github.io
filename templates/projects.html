{% extends "layouts/default.html" %}
{% set active_page = 'projects' %}

{% block body %}
<section class="projects-section py-5 bg-white" aria-labelledby="projects-heading">
    <div class="container">

        {% for title, is_featured in [
        ('Featured Projects', true),
        ('Other Projects', false)
        ] %}
        <section class="project-group mb-5" aria-labelledby="{{ title|lower|replace(' ', '-') }}-heading">
            <header class="mb-4">
                <h3 id="{{ title|lower|replace(' ', '-') }}-heading" class="h4">
                    {{ title }}
                </h3>
            </header>

            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                {% for project in projects if project.featured == is_featured %}
                <div class="col">
                    {% if project.link is defined %}
                    <a href="{{ project.link }}" target="_blank" rel="noopener noreferrer"
                        class="text-decoration-none project-card-link"
                        aria-label="View details for {{ project.title }}">
                        {% endif %}
                        <article class="card h-100 shadow-sm">
                            <div class="card-body d-flex flex-column">
                                <h6 class="card-subtitle mb-2 text-muted small">
                                    {{ project.type|capitalize }} · {{ project.year }}
                                </h6>
                                <h5 class="card-title mb-3">{{ project.title }}</h5>
                                <p class="card-text text-truncate mb-0">
                                    {{ project.description }}
                                </p>
                            </div>
                        </article>
                        {% if project.link is defined %}
                    </a>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </section>
        {% endfor %}

    </div>
</section>
{% endblock %}